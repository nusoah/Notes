## 构造函数

`new FunctionName()`

如果使用上面的方式创建对象，该函数叫做构造函数，构造函数特点有四:

> 函数用大驼峰方式命名

> 构造函数内部会自动创建一个新的对象，this指向新创建的对象，并自动返回该对象(该对象隐式原型__proto__指向该构造函数的原型)

> 构造函数内的返回值，如果显示的返回原始值，直接忽略，如果是引用值，覆盖this

> 所有的对象都是通过构造函数创建的

## new.target表达式

该表达式在构造函数中使用，如果该构造函数通过new关键字执行，则new.target返回的是构造函数本身；如果不是通过new关键字执行，则返回的undefined。

**用途**：通常用于判断某个函数是否通过new在调用

```js
function User_1() {
    console.log(new.target); // undefined
}

function User_2() {
    console.log(new.target); // [Function: User_2]
}

User_1();
new User_2();
```
兼容写法如下:

```js
function User() {
    if(!new.target === User){ // 有this直接挂载
        this.name = 'ss'
    }else { // 没有this显示返回对象
        return {
            name: 'ss'
        };
    }
}
```

数组的本质也是用这种方式进行的兼容，因为：

```js
new Array(10);
Array(10);
// 二者结果相同
```

## 函数本质

函数的本质就是对象，某些教程中将构造函数称之为构造器